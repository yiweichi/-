<script type="module">
    import { ethers } from "/ethers-5.2.esm.min.js";
const provider = new ethers.providers.Web3Provider(window.ethereum,"any");

const signer = provider.getSigner();
var blocknumber=await  provider.getBlockNumber();

var balance = await provider.getBalance("0xe58bd00D59461Ee6D034e0966583BB97f975CA42")
/*
const tx = signer.sendTransaction({
    to: "0x3CEfe2a38fA388B6e25C2D3350eB8fB3A31ed0E8",
    value: ethers.utils.parseEther("100.0")
});
*/
console.log(ethers.utils.formatEther(balance))
console.log(blocknumber);
//ethers.utils.parseEther("1.0")


const ERC20 = "0xFD5A3B9aBA4ee42d64814848c50aDf0DB9AB19A5";

const daiAbi = [
  "function transfer(address receiver, uint256 numTokens) public override returns (bool)",
  "function getData() view returns (uint)",
  "function setData(uint x)"
];

const erc20Contract = new ethers.Contract(ERC20 , daiAbi, provider);

var n=await erc20Contract.transfer ();
var nn=ethers.utils.formatUnits(n, 0);
console.log(nn);
//console.log(n);
const daiWithSigner = erc20Contract.connect(signer);

const dai = ethers.utils.parseUnits("14.0", 18);

var tx = daiWithSigner.setData(dai);
</script>

<!-- #######  THIS IS A COMMENT - Visible only in the source editor #########-->
<h2>USDT去中心化点对点担保交易</h2>
<p>本程序支持&nbsp; Metamask钱包，使得交易双方可以在区块链上担保交易。</p>
<p>正在销售的订单：</p>
<table style="width: 356.6px;" border="1">
<tbody>
<tr>
<td style="width: 89px;">订单编号</td>
<td style="width: 69px;">数量</td>
<td style="width: 63px;">价格</td>
<td style="width: 50px;">货币</td>
<td style="width: 58px;">描述</td>
<td style="width: 106.6px;">操作</td>
</tr>
<tr>
<td style="width: 89px;">&nbsp;</td>
<td style="width: 69px;">&nbsp;</td>
<td style="width: 63px;">&nbsp;</td>
<td style="width: 50px;">&nbsp;</td>
<td style="width: 58px;">&nbsp;</td>
<td style="width: 106.6px;">购买</td>
</tr>
<tr>
<td style="width: 89px;">&nbsp;</td>
<td style="width: 69px;">&nbsp;</td>
<td style="width: 63px;">&nbsp;</td>
<td style="width: 50px;">&nbsp;</td>
<td style="width: 58px;">&nbsp;</td>
<td style="width: 106.6px;">&nbsp;</td>
</tr>
<tr>
<td style="width: 89px;">&nbsp;</td>
<td style="width: 69px;">&nbsp;</td>
<td style="width: 63px;">&nbsp;</td>
<td style="width: 50px;">&nbsp;</td>
<td style="width: 58px;">&nbsp;</td>
<td style="width: 106.6px;">&nbsp;</td>
</tr>
<tr>
<td style="width: 89px;">&nbsp;</td>
<td style="width: 69px;">&nbsp;</td>
<td style="width: 63px;">&nbsp;</td>
<td style="width: 50px;">&nbsp;</td>
<td style="width: 58px;">&nbsp;</td>
<td style="width: 106.6px;">&nbsp;</td>
</tr>
<tr>
<td style="width: 89px;">&nbsp;</td>
<td style="width: 69px;">&nbsp;</td>
<td style="width: 63px;">&nbsp;</td>
<td style="width: 50px;">&nbsp;</td>
<td style="width: 58px;">&nbsp;</td>
<td style="width: 106.6px;">&nbsp;</td>
</tr>
<tr>
<td style="width: 89px;">&nbsp;</td>
<td style="width: 69px;">&nbsp;</td>
<td style="width: 63px;">&nbsp;</td>
<td style="width: 50px;">&nbsp;</td>
<td style="width: 58px;">&nbsp;</td>
<td style="width: 106.6px;">&nbsp;</td>
</tr>
<tr>
<td style="width: 89px;">&nbsp;</td>
<td style="width: 69px;">&nbsp;</td>
<td style="width: 63px;">&nbsp;</td>
<td style="width: 50px;">&nbsp;</td>
<td style="width: 58px;">&nbsp;</td>
<td style="width: 106.6px;">&nbsp;</td>
</tr>
<tr>
<td style="width: 89px;">&nbsp;</td>
<td style="width: 69px;">&nbsp;</td>
<td style="width: 63px;">&nbsp;</td>
<td style="width: 50px;">&nbsp;</td>
<td style="width: 58px;">&nbsp;</td>
<td style="width: 106.6px;">&nbsp;</td>
</tr>
<tr>
<td style="width: 89px;">&nbsp;</td>
<td style="width: 69px;">&nbsp;</td>
<td style="width: 63px;">&nbsp;</td>
<td style="width: 50px;">&nbsp;</td>
<td style="width: 58px;">&nbsp;</td>
<td style="width: 106.6px;">&nbsp;</td>
</tr>
</tbody>
</table>